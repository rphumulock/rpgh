if (self.CavalryLogger) { CavalryLogger.start_js(["\/orv8"]); }

__d("Asset3dContextMenu",["EventListener","UserAgent","CurrentUser","React","ReactXUIMenu","MountedContextMenu.react","ReactDOM","Event"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ReactXUIMenu").Item;function i(j,k,l){__p&&__p();this.$Asset3dContextMenu5=function(m){var n=/^a$/i.test(m.target.nodeName||""),o=c("UserAgent").isPlatform("Mac OS X")?m.getModifiers().meta:m.getModifiers().ctrl,p=!n&&c("CurrentUser").isEmployee()&&o;if(p){m.preventDefault();this.$Asset3dContextMenu6()}else{c("ReactDOM").unmountComponentAtNode(this.$Asset3dContextMenu1);delete this.$Asset3dContextMenu3}}.bind(this);this.$Asset3dContextMenu1=j;this.$Asset3dContextMenu2=k;this.$Asset3dContextMenu4=l;c("EventListener").listen(k,"contextmenu",this.$Asset3dContextMenu5)}i.prototype.$Asset3dContextMenu6=function(){if(this.$Asset3dContextMenu2){var j=void 0;if(this.$Asset3dContextMenu4)j=c("React").createElement(h,{href:this.$Asset3dContextMenu4,target:"_blank"},"Download 3D File");var k=c("React").createElement(c("ReactXUIMenu"),null,j),l=c("React").createElement(c("MountedContextMenu.react"),{mountedTriggerElem:this.$Asset3dContextMenu2,menu:k});this.$Asset3dContextMenu3=c("ReactDOM").render(l,this.$Asset3dContextMenu1)}};f.exports=i}),null);
__d("Asset3dComponentContextMenu.react",["React","Asset3dContextMenu"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.componentDidMount=function(){if(this.props.target)this.$Asset3dComponentContextMenu1=new(c("Asset3dContextMenu"))(this.refs.container,this.props.target,this.props.fileURL)};j.prototype.render=function(){return c("React").createElement("div",{ref:"container"})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("Asset3DCategory",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNSPECIFIED:"unspecified",MEDIUM:"medium",SPACES_MARKER_DRAWING:"spaces_marker_drawing",METAVERSITY:"metaversity",PHOTOS_3D:"photos_3d",THIRD_PARTY:"third_party",LINK_SCRAPE:"link_scrape",COMPOSER:"composer"})}),null);
__d("Asset3DStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UPLOADING:"uploading",SUCCESS:"success",FAIL:"fail"})}),null);
__d("GLTFLoader.r88",["Promise","ThreeJS.r88"],(function aa(ba,a,ca,da,b,ea){__p&&__p();GLTFLoader=function(){__p&&__p();function c(A){this.manager=A!==undefined?A:a("ThreeJS.r88").DefaultLoadingManager}c.prototype={constructor:c,crossOrigin:"Anonymous",load:function A(B,C,D,E){var F=this,G=this.path!==undefined?this.path:a("ThreeJS.r88").Loader.prototype.extractUrlBase(B),H=new(a("ThreeJS.r88").FileLoader)(F.manager);H.setResponseType("arraybuffer");H.load(B,function(I){try{F.parse(I,G,C,E)}catch(J){if(E!==undefined)E(J.constructor===Error?J:new Error("THREE.GLTFLoader: Unable to parse model."))}},D,E)},setCrossOrigin:function A(B){this.crossOrigin=B},setPath:function A(B){this.path=B},parse:function A(B,C,D,E){__p&&__p();var F,G={};if(typeof B==="string")F=B;else{var H=y(new Uint8Array(B,0,4));if(H===i){G[e.KHR_BINARY_GLTF]=new l(B);F=G[e.KHR_BINARY_GLTF].content}else F=y(new Uint8Array(B))}var I=JSON.parse(F);if(I.asset===undefined||I.asset.version[0]<2){E(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}if(I.extensionsUsed){if(I.extensionsUsed.indexOf(e.KHR_LIGHTS)>=0)G[e.KHR_LIGHTS]=new f(I);if(I.extensionsUsed.indexOf(e.KHR_MATERIALS_COMMON)>=0)G[e.KHR_MATERIALS_COMMON]=new g(I);if(I.extensionsUsed.indexOf(e.KHR_MATERIALS_UNLIT)>=0)G[e.KHR_MATERIALS_UNLIT]=new h(I);if(I.extensionsUsed.indexOf(e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)>=0)G[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new m()}console.time("GLTFLoader");var J=new z(I,G,{path:C||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});J.parse(function(K,L,M,N){console.timeEnd("GLTFLoader");var O={scene:K,scenes:L,cameras:M,animations:N};D(O)},E)}};function d(){var A={};return{get:function B(C){return A[C]},add:function B(C,D){A[C]=D},remove:function B(C){delete A[C]},removeAll:function B(){A={}}}}var e={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_COMMON:"KHR_materials_common",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness"};function f(A){__p&&__p();this.name=e.KHR_LIGHTS;this.lights={};var B=A.extensions&&A.extensions[e.KHR_LIGHTS]||{},C=B.lights||{};for(var D in C){var E=C[D],F,G=new(a("ThreeJS.r88").Color)().fromArray(E.color);switch(E.type){case"directional":F=new(a("ThreeJS.r88").DirectionalLight)(G);F.position.set(0,0,1);break;case"point":F=new(a("ThreeJS.r88").PointLight)(G);break;case"spot":F=new(a("ThreeJS.r88").SpotLight)(G);F.position.set(0,0,1);break;case"ambient":F=new(a("ThreeJS.r88").AmbientLight)(G);break}if(F){if(E.constantAttenuation!==undefined)F.intensity=E.constantAttenuation;if(E.linearAttenuation!==undefined)F.distance=1/E.linearAttenuation;if(E.quadraticAttenuation!==undefined)F.decay=E.quadraticAttenuation;if(E.fallOffAngle!==undefined)F.angle=E.fallOffAngle;E.fallOffExponent!==undefined;F.name=E.name||"light_"+D;this.lights[D]=F}}}function g(A){this.name=e.KHR_MATERIALS_COMMON}g.prototype.getMaterialType=function(A){var B=A.extensions[this.name];switch(B.type){case"commonBlinn":case"commonPhong":return a("ThreeJS.r88").MeshPhongMaterial;case"commonLambert":return a("ThreeJS.r88").MeshLambertMaterial;case"commonConstant":default:return a("ThreeJS.r88").MeshBasicMaterial}};g.prototype.extendParams=function(A,B,C){__p&&__p();var D=B.extensions[this.name],E=[],F=[];switch(D.type){case"commonBlinn":case"commonPhong":F.push("diffuseFactor","diffuseTexture","specularFactor","specularTexture","shininessFactor");break;case"commonLambert":F.push("diffuseFactor","diffuseTexture");break;case"commonConstant":default:break}var G={};F.forEach(function(H){if(D[H]!==undefined)G[H]=D[H]});if(G.diffuseFactor!==undefined){A.color=new(a("ThreeJS.r88").Color)().fromArray(G.diffuseFactor);A.opacity=G.diffuseFactor[3]}if(G.diffuseTexture!==undefined)E.push(C.assignTexture(A,"map",G.diffuseTexture.index));if(G.specularFactor!==undefined)A.specular=new(a("ThreeJS.r88").Color)().fromArray(G.specularFactor);if(G.specularTexture!==undefined)E.push(C.assignTexture(A,"specularMap",G.specularTexture.index));if(G.shininessFactor!==undefined)A.shininess=G.shininessFactor;return a("Promise").all(E)};function h(A){this.name=e.KHR_MATERIALS_UNLIT}h.prototype.getMaterialType=function(A){return a("ThreeJS.r88").MeshBasicMaterial};h.prototype.extendParams=function(A,B,C){__p&&__p();var D=[];delete B.emissiveFactor;delete B.emissiveTexture;A.color=new(a("ThreeJS.r88").Color)(1,1,1);A.opacity=1;var E=B.pbrMetallicRoughness;if(E!==undefined){if(Array.isArray(E.baseColorFactor)){var F=E.baseColorFactor;A.color.fromArray(F);A.opacity=F[3]}if(E.baseColorTexture!==undefined)D.push(C.assignTexture(A,"map",E.baseColorTexture.index))}return a("Promise").all(D)};var fa="binary_glTF",i="glTF",j=12,k={JSON:1313821514,BIN:5130562};function l(A){__p&&__p();this.name=e.KHR_BINARY_GLTF;this.content=null;this.body=null;var B=new DataView(A,0,j);this.header={magic:y(new Uint8Array(A.slice(0,4))),version:B.getUint32(4,true),length:B.getUint32(8,true)};if(this.header.magic!==i)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");else if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use GLTFLoader instead.");var C=new DataView(A,j),D=0;while(D<C.byteLength){var E=C.getUint32(D,true);D+=4;var F=C.getUint32(D,true);D+=4;if(F===k.JSON){var G=new Uint8Array(A,j+D,E);this.content=y(G)}else if(F===k.BIN){var H=j+D;this.body=A.slice(H,H+E)}D+=E}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function m(){__p&&__p();return{name:e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function A(){return a("ThreeJS.r88").ShaderMaterial},extendParams:function A(B,C,D){__p&&__p();var E=C.extensions[this.name],F=a("ThreeJS.r88").ShaderLib.standard,G=a("ThreeJS.r88").UniformsUtils.clone(F.uniforms),H=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),I=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),J=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),K=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),L=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),M=F.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",H).replace("#include <metalnessmap_pars_fragment>",I).replace("#include <roughnessmap_fragment>",J).replace("#include <metalnessmap_fragment>",K).replace("#include <lights_physical_fragment>",L);delete G.roughness;delete G.metalness;delete G.roughnessMap;delete G.metalnessMap;G.specular={value:new(a("ThreeJS.r88").Color)().setHex(1118481)};G.glossiness={value:.5};G.specularMap={value:null};G.glossinessMap={value:null};B.vertexShader=F.vertexShader;B.fragmentShader=M;B.uniforms=G;B.defines={STANDARD:""};B.color=new(a("ThreeJS.r88").Color)(1,1,1);B.opacity=1;var N=[];if(Array.isArray(E.diffuseFactor)){var O=E.diffuseFactor;B.color.fromArray(O);B.opacity=O[3]}if(E.diffuseTexture!==undefined)N.push(D.assignTexture(B,"map",E.diffuseTexture.index));B.emissive=new(a("ThreeJS.r88").Color)(0,0,0);B.glossiness=E.glossinessFactor!==undefined?E.glossinessFactor:1;B.specular=new(a("ThreeJS.r88").Color)(1,1,1);if(Array.isArray(E.specularFactor))B.specular.fromArray(E.specularFactor);if(E.specularGlossinessTexture!==undefined){var P=E.specularGlossinessTexture.index;N.push(D.assignTexture(B,"glossinessMap",P));N.push(D.assignTexture(B,"specularMap",P))}return a("Promise").all(N)},createMaterial:function A(B){__p&&__p();var C=new(a("ThreeJS.r88").ShaderMaterial)({defines:B.defines,vertexShader:B.vertexShader,fragmentShader:B.fragmentShader,uniforms:B.uniforms,fog:true,lights:true,opacity:B.opacity,transparent:B.transparent});C.isGLTFSpecularGlossinessMaterial=true;C.color=B.color;C.map=B.map===undefined?null:B.map;C.lightMap=null;C.lightMapIntensity=1;C.aoMap=B.aoMap===undefined?null:B.aoMap;C.aoMapIntensity=1;C.emissive=B.emissive;C.emissiveIntensity=1;C.emissiveMap=B.emissiveMap===undefined?null:B.emissiveMap;C.bumpMap=B.bumpMap===undefined?null:B.bumpMap;C.bumpScale=1;C.normalMap=B.normalMap===undefined?null:B.normalMap;if(B.normalScale)C.normalScale=B.normalScale;C.displacementMap=null;C.displacementScale=1;C.displacementBias=0;C.specularMap=B.specularMap===undefined?null:B.specularMap;C.specular=B.specular;C.glossinessMap=B.glossinessMap===undefined?null:B.glossinessMap;C.glossiness=B.glossiness;C.alphaMap=null;C.envMap=B.envMap===undefined?null:B.envMap;C.envMapIntensity=1;C.refractionRatio=.98;C.extensions.derivatives=true;return C},cloneMaterial:function A(B){var C=B.clone();C.isGLTFSpecularGlossinessMaterial=true;var D=this.specularGlossinessParams;for(var E=0;E<D.length;E++)C[D[E]]=B[D[E]];return C},refreshUniforms:function A(B,C,D,E,F,G){__p&&__p();var H=F.uniforms,I=F.defines;H.opacity.value=F.opacity;H.diffuse.value.copy(F.color);H.emissive.value.copy(F.emissive).multiplyScalar(F.emissiveIntensity);H.map.value=F.map;H.specularMap.value=F.specularMap;H.alphaMap.value=F.alphaMap;H.lightMap.value=F.lightMap;H.lightMapIntensity.value=F.lightMapIntensity;H.aoMap.value=F.aoMap;H.aoMapIntensity.value=F.aoMapIntensity;var J;if(F.map)J=F.map;else if(F.specularMap)J=F.specularMap;else if(F.displacementMap)J=F.displacementMap;else if(F.normalMap)J=F.normalMap;else if(F.bumpMap)J=F.bumpMap;else if(F.glossinessMap)J=F.glossinessMap;else if(F.alphaMap)J=F.alphaMap;else if(F.emissiveMap)J=F.emissiveMap;if(J!==undefined){if(J.isWebGLRenderTarget)J=J.texture;var K,L;if(J.matrix!==undefined){if(J.matrixAutoUpdate===true){K=J.offset;L=J.repeat;var M=J.rotation,N=J.center;J.matrix.setUvTransform(K.x,K.y,L.x,L.y,M,N.x,N.y)}H.uvTransform.value.copy(J.matrix)}else{K=J.offset;L=J.repeat;H.offsetRepeat.value.set(K.x,K.y,L.x,L.y)}}H.envMap.value=F.envMap;H.envMapIntensity.value=F.envMapIntensity;H.flipEnvMap.value=F.envMap&&F.envMap.isCubeTexture?-1:1;H.refractionRatio.value=F.refractionRatio;H.specular.value.copy(F.specular);H.glossiness.value=F.glossiness;H.glossinessMap.value=F.glossinessMap;H.emissiveMap.value=F.emissiveMap;H.bumpMap.value=F.bumpMap;H.normalMap.value=F.normalMap;H.displacementMap.value=F.displacementMap;H.displacementScale.value=F.displacementScale;H.displacementBias.value=F.displacementBias;if(H.glossinessMap.value!==null&&I.USE_GLOSSINESSMAP===undefined){I.USE_GLOSSINESSMAP="";I.USE_ROUGHNESSMAP=""}if(H.glossinessMap.value===null&&I.USE_GLOSSINESSMAP!==undefined){delete I.USE_GLOSSINESSMAP;delete I.USE_ROUGHNESSMAP}}}}var n={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ga={5126:Number,35675:a("ThreeJS.r88").Matrix3,35676:a("ThreeJS.r88").Matrix4,35664:a("ThreeJS.r88").Vector2,35665:a("ThreeJS.r88").Vector3,35666:a("ThreeJS.r88").Vector4,35678:a("ThreeJS.r88").Texture},o={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},p={9728:a("ThreeJS.r88").NearestFilter,9729:a("ThreeJS.r88").LinearFilter,9984:a("ThreeJS.r88").NearestMipMapNearestFilter,9985:a("ThreeJS.r88").LinearMipMapNearestFilter,9986:a("ThreeJS.r88").NearestMipMapLinearFilter,9987:a("ThreeJS.r88").LinearMipMapLinearFilter},q={33071:a("ThreeJS.r88").ClampToEdgeWrapping,33648:a("ThreeJS.r88").MirroredRepeatWrapping,10497:a("ThreeJS.r88").RepeatWrapping},r={6406:a("ThreeJS.r88").AlphaFormat,6407:a("ThreeJS.r88").RGBFormat,6408:a("ThreeJS.r88").RGBAFormat,6409:a("ThreeJS.r88").LuminanceFormat,6410:a("ThreeJS.r88").LuminanceAlphaFormat},s={5121:a("ThreeJS.r88").UnsignedByteType,32819:a("ThreeJS.r88").UnsignedShort4444Type,32820:a("ThreeJS.r88").UnsignedShort5551Type,33635:a("ThreeJS.r88").UnsignedShort565Type},ha={1028:a("ThreeJS.r88").BackSide,1029:a("ThreeJS.r88").FrontSide},ia={512:a("ThreeJS.r88").NeverDepth,513:a("ThreeJS.r88").LessDepth,514:a("ThreeJS.r88").EqualDepth,515:a("ThreeJS.r88").LessEqualDepth,516:a("ThreeJS.r88").GreaterEqualDepth,517:a("ThreeJS.r88").NotEqualDepth,518:a("ThreeJS.r88").GreaterEqualDepth,519:a("ThreeJS.r88").AlwaysDepth},ja={32774:a("ThreeJS.r88").AddEquation,32778:a("ThreeJS.r88").SubtractEquation,32779:a("ThreeJS.r88").ReverseSubtractEquation},ka={0:a("ThreeJS.r88").ZeroFactor,1:a("ThreeJS.r88").OneFactor,768:a("ThreeJS.r88").SrcColorFactor,769:a("ThreeJS.r88").OneMinusSrcColorFactor,770:a("ThreeJS.r88").SrcAlphaFactor,771:a("ThreeJS.r88").OneMinusSrcAlphaFactor,772:a("ThreeJS.r88").DstAlphaFactor,773:a("ThreeJS.r88").OneMinusDstAlphaFactor,774:a("ThreeJS.r88").DstColorFactor,775:a("ThreeJS.r88").OneMinusDstColorFactor,776:a("ThreeJS.r88").SrcAlphaSaturateFactor},t={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},u={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},la={CATMULLROMSPLINE:a("ThreeJS.r88").InterpolateSmooth,CUBICSPLINE:a("ThreeJS.r88").InterpolateSmooth,LINEAR:a("ThreeJS.r88").InterpolateLinear,STEP:a("ThreeJS.r88").InterpolateDiscrete},ma={2884:"CULL_FACE",2929:"DEPTH_TEST",3042:"BLEND",3089:"SCISSOR_TEST",32823:"POLYGON_OFFSET_FILL",32926:"SAMPLE_ALPHA_TO_COVERAGE"},v={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function w(A,B,C){__p&&__p();if(!A)return a("Promise").resolve();var D,E=[];if(Object.prototype.toString.call(A)==="[object Array]"){D=[];var F=A.length;for(var G=0;G<F;G++){var H=B.call(C||this,A[G],G);if(H){if(H instanceof a("Promise"))H=H.then(function(I,H){D[I]=H}.bind(this,G));else D[G]=H;E.push(H)}}}else{D={};for(var I in A)if(Object.prototype.hasOwnProperty.call(A,I)){var H=B.call(C||this,A[I],I);if(H){if(H instanceof a("Promise"))H=H.then(function(I,H){D[I]=H}.bind(this,I));else D[I]=H;E.push(H)}}}return a("Promise").all(E).then(function(){return D})}function x(A,B){if(typeof A!=="string"||A==="")return"";if(/^(https?:)?\/\//i.test(A))return A;if(/^data:.*,.*$/i.test(A))return A;if(/^blob:.*$/i.test(A))return A;return B+A}function y(A){if(window.TextDecoder!==undefined)return new TextDecoder().decode(A);var B="";for(var C=0,D=A.length;C<D;C++)B+=String.fromCharCode(A[C]);return B}function na(){return new(a("ThreeJS.r88").MeshStandardMaterial)({color:16777215,emissive:0,metalness:1,roughness:1,transparent:false,depthTest:true,side:a("ThreeJS.r88").FrontSide})}function oa(A,B,C,D){__p&&__p();var E=A.geometry,F=A.material,G=C.targets,H=E.morphAttributes;H.position=[];H.normal=[];F.morphTargets=true;for(var I=0,J=G.length;I<J;I++){var K=G[I],L="morphTarget"+I,M,N;if(K.POSITION!==undefined){M=D.accessors[K.POSITION].clone();var O=E.attributes.position;for(var P=0,Q=M.count;P<Q;P++)M.setXYZ(P,M.getX(P)+O.getX(P),M.getY(P)+O.getY(P),M.getZ(P)+O.getZ(P))}else if(E.attributes.position)M=E.attributes.position.clone();if(M!==undefined){M.name=L;H.position.push(M)}if(K.NORMAL!==undefined){F.morphNormals=true;N=D.accessors[K.NORMAL].clone();var R=E.attributes.normal;for(var P=0,Q=N.count;P<Q;P++)N.setXYZ(P,N.getX(P)+R.getX(P),N.getY(P)+R.getY(P),N.getZ(P)+R.getZ(P))}else if(E.attributes.normal!==undefined)N=E.attributes.normal.clone();if(N!==undefined){N.name=L;H.normal.push(N)}}A.updateMorphTargets();if(B.weights!==undefined)for(var I=0,J=B.weights.length;I<J;I++)A.morphTargetInfluences[I]=B.weights[I]}function z(A,B,C){this.json=A||{};this.extensions=B||{};this.options=C||{};this.cache=new d();this.textureLoader=new(a("ThreeJS.r88").TextureLoader)(this.options.manager);this.textureLoader.setCrossOrigin(this.options.crossOrigin);this.fileLoader=new(a("ThreeJS.r88").FileLoader)(this.options.manager);this.fileLoader.setResponseType("arraybuffer")}z.prototype._withDependencies=function(A){__p&&__p();var B={};for(var C=0;C<A.length;C++){var D=A[C],E="load"+D.charAt(0).toUpperCase()+D.slice(1),F=this.cache.get(D);if(F!==undefined)B[D]=F;else if(this[E]){var G=this[E]();this.cache.add(D,G);B[D]=G}}return w(B,function(D){return D})};z.prototype.parse=function(A,B){var C=this.json,D=this;this.cache.removeAll();this._withDependencies(["scenes","animations"]).then(function(E){var F=E.scenes||[],G=F[C.scene||0],H=E.animations||[];D.getDependencies("camera").then(function(I){A(G,F,I,H)})["catch"](B)})["catch"](B)};z.prototype.getDependency=function(A,B){var C=A+":"+B,D=this.cache.get(C);if(!D){var E="load"+A.charAt(0).toUpperCase()+A.slice(1);D=this[E](B);this.cache.add(C,D)}return D};z.prototype.getDependencies=function(A){var B=this,C=this.json[A+"s"]||[];return a("Promise").all(C.map(function(D,E){return B.getDependency(A,E)}))};z.prototype.loadBuffer=function(A){var B=this.json.buffers[A],C=this.fileLoader;if(B.type&&B.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+B.type+" buffer type is not supported.");if(B.uri===undefined&&A===0)return a("Promise").resolve(this.extensions[e.KHR_BINARY_GLTF].body);var D=this.options;return new(a("Promise"))(function(E,F){C.load(x(B.uri,D.path),E,undefined,function(){F(new Error('THREE.GLTFLoader: Failed to load buffer "'+B.uri+'".'))})})};z.prototype.loadBufferView=function(A){var B=this.json.bufferViews[A];return this.getDependency("buffer",B.buffer).then(function(C){var D=B.byteLength||0,E=B.byteOffset||0;return C.slice(E,E+D)})};z.prototype.loadAccessors=function(){__p&&__p();var A=this,B=this.json;return w(B.accessors,function(C){__p&&__p();return A.getDependency("bufferView",C.bufferView).then(function(D){var E=t[C.type],F=o[C.componentType],G=F.BYTES_PER_ELEMENT,H=G*E,I=B.bufferViews[C.bufferView].byteStride,J=C.normalized===true,K;if(I&&I!==H){K=new F(D);var L=new(a("ThreeJS.r88").InterleavedBuffer)(K,I/G);return new(a("ThreeJS.r88").InterleavedBufferAttribute)(L,E,C.byteOffset/G,J)}else{K=new F(D,C.byteOffset,C.count*E);return new(a("ThreeJS.r88").BufferAttribute)(K,E,J)}})})};z.prototype.loadTexture=function(A){__p&&__p();var B=this,C=this.json,D=this.options,E=this.textureLoader,F=window.URL||window.webkitURL,G=C.textures[A],H=C.images[G.source],I=H.uri,J=false;if(H.bufferView!==undefined)I=B.getDependency("bufferView",H.bufferView).then(function(K){J=true;var L=new Blob([K],{type:H.mimeType});I=F.createObjectURL(L);return I});return a("Promise").resolve(I).then(function(I){var K=a("ThreeJS.r88").Loader.Handlers.get(I)||E;return new(a("Promise"))(function(L,M){K.load(x(I,D.path),L,undefined,M)})}).then(function(K){__p&&__p();if(J===true)F.revokeObjectURL(I);K.flipY=false;if(G.name!==undefined)K.name=G.name;K.format=G.format!==undefined?r[G.format]:a("ThreeJS.r88").RGBAFormat;G.internalFormat!==undefined&&K.format!==r[G.internalFormat];K.type=G.type!==undefined?s[G.type]:a("ThreeJS.r88").UnsignedByteType;var L=C.samplers||{},M=L[G.sampler]||{};K.magFilter=p[M.magFilter]||a("ThreeJS.r88").LinearFilter;K.minFilter=p[M.minFilter]||a("ThreeJS.r88").LinearMipMapLinearFilter;K.wrapS=q[M.wrapS]||a("ThreeJS.r88").RepeatWrapping;K.wrapT=q[M.wrapT]||a("ThreeJS.r88").RepeatWrapping;return K})};z.prototype.assignTexture=function(A,B,C){return this.getDependency("texture",C).then(function(D){A[B]=D})};z.prototype.loadMaterials=function(){__p&&__p();var A=this,B=this.json,C=this.extensions;return w(B.materials,function(D){__p&&__p();var E,F={},G=D.extensions||{},H=[];if(G[e.KHR_MATERIALS_UNLIT]){var I=C[e.KHR_MATERIALS_UNLIT];E=I.getMaterialType(D);H.push(I.extendParams(F,D,A))}else if(G[e.KHR_MATERIALS_COMMON]){var J=C[e.KHR_MATERIALS_COMMON];E=J.getMaterialType(D);H.push(J.extendParams(F,D,A))}else if(D.pbrMetallicRoughness!==undefined){E=a("ThreeJS.r88").MeshStandardMaterial;var K=D.pbrMetallicRoughness;F.color=new(a("ThreeJS.r88").Color)(1,1,1);F.opacity=1;if(Array.isArray(K.baseColorFactor)){var L=K.baseColorFactor;F.color.fromArray(L);F.opacity=L[3]}if(K.baseColorTexture!==undefined)H.push(A.assignTexture(F,"map",K.baseColorTexture.index));F.metalness=K.metallicFactor!==undefined?K.metallicFactor:1;F.roughness=K.roughnessFactor!==undefined?K.roughnessFactor:1;if(K.metallicRoughnessTexture!==undefined){var M=K.metallicRoughnessTexture.index;H.push(A.assignTexture(F,"metalnessMap",M));H.push(A.assignTexture(F,"roughnessMap",M))}}else E=a("ThreeJS.r88").MeshPhongMaterial;if(D.doubleSided===true)F.side=a("ThreeJS.r88").DoubleSide;var N=D.alphaMode||v.OPAQUE;if(N!==v.OPAQUE){F.transparent=true;if(N===v.MASK)F.alphaTest=D.alphaCutoff||.5}else F.transparent=false;if(D.normalTexture!==undefined){H.push(A.assignTexture(F,"normalMap",D.normalTexture.index));F.normalScale=new(a("ThreeJS.r88").Vector2)(1,1);if(D.normalTexture.scale!==undefined)F.normalScale.set(D.normalTexture.scale,D.normalTexture.scale)}if(D.occlusionTexture!==undefined){H.push(A.assignTexture(F,"aoMap",D.occlusionTexture.index));if(D.occlusionTexture.strength!==undefined)F.aoMapIntensity=D.occlusionTexture.strength}if(D.emissiveFactor!==undefined)if(E===a("ThreeJS.r88").MeshBasicMaterial)F.color=new(a("ThreeJS.r88").Color)().fromArray(D.emissiveFactor);else F.emissive=new(a("ThreeJS.r88").Color)().fromArray(D.emissiveFactor);if(D.emissiveTexture!==undefined)if(E===a("ThreeJS.r88").MeshBasicMaterial)H.push(A.assignTexture(F,"map",D.emissiveTexture.index));else H.push(A.assignTexture(F,"emissiveMap",D.emissiveTexture.index));return a("Promise").all(H).then(function(){__p&&__p();var O;if(E===a("ThreeJS.r88").ShaderMaterial)O=C[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(F);else O=new E(F);if(D.name!==undefined)O.name=D.name;if(O.normalScale)O.normalScale.x=-O.normalScale.x;if(O.map)O.map.encoding=a("ThreeJS.r88").sRGBEncoding;if(O.emissiveMap)O.emissiveMap.encoding=a("ThreeJS.r88").sRGBEncoding;if(D.extras)O.userData=D.extras;return O})})};z.prototype.loadGeometries=function(A){__p&&__p();return this._withDependencies(["accessors"]).then(function(B){__p&&__p();return w(A,function(C){__p&&__p();var D=new(a("ThreeJS.r88").BufferGeometry)(),E=C.attributes;for(var F in E){var G=E[F];if(G===undefined)return;var H=B.accessors[G];switch(F){case"POSITION":D.addAttribute("position",H);break;case"NORMAL":D.addAttribute("normal",H);break;case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":D.addAttribute("uv",H);break;case"TEXCOORD_1":D.addAttribute("uv2",H);break;case"COLOR_0":case"COLOR0":case"COLOR":D.addAttribute("color",H);break;case"WEIGHTS_0":case"WEIGHT":D.addAttribute("skinWeight",H);break;case"JOINTS_0":case"JOINT":D.addAttribute("skinIndex",H);break}}if(C.indices!==undefined)D.setIndex(B.accessors[C.indices]);return D})})};z.prototype.loadMeshes=function(){__p&&__p();var A=this,B=this.json,C=this.extensions;return this._withDependencies(["accessors","materials"]).then(function(D){__p&&__p();return w(B.meshes,function(E,F){__p&&__p();var G=new(a("ThreeJS.r88").Group)(),H=E.primitives||[];return A.loadGeometries(H).then(function(I){__p&&__p();for(var J=0;J<H.length;J++){var K=H[J],L=I[J],M=K.material===undefined?na():D.materials[K.material];if(M.aoMap&&L.attributes.uv2===undefined&&L.attributes.uv!==undefined)L.addAttribute("uv2",new(a("ThreeJS.r88").BufferAttribute)(L.attributes.uv.array,2));var N=L.attributes.color!==undefined,O=L.attributes.normal===undefined;if(N||O)if(M.isGLTFSpecularGlossinessMaterial){var P=C[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];M=P.cloneMaterial(M)}else M=M.clone();if(N){M.vertexColors=a("ThreeJS.r88").VertexColors;M.needsUpdate=true}if(O)M.flatShading=true;var Q;if(K.mode===n.TRIANGLES||K.mode===undefined)Q=new(a("ThreeJS.r88").Mesh)(L,M);else if(K.mode===n.TRIANGLE_STRIP){Q=new(a("ThreeJS.r88").Mesh)(L,M);Q.drawMode=a("ThreeJS.r88").TriangleStripDrawMode}else if(K.mode===n.TRIANGLE_FAN){Q=new(a("ThreeJS.r88").Mesh)(L,M);Q.drawMode=a("ThreeJS.r88").TriangleFanDrawMode}else if(K.mode===n.LINES)Q=new(a("ThreeJS.r88").LineSegments)(L,M);else if(K.mode===n.LINE_STRIP)Q=new(a("ThreeJS.r88").Line)(L,M);else if(K.mode===n.LINE_LOOP)Q=new(a("ThreeJS.r88").LineLoop)(L,M);else if(K.mode===n.POINTS)Q=new(a("ThreeJS.r88").Points)(L,M);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: ",K.mode);Q.name=E.name||"mesh_"+F;if(K.targets!==undefined)oa(Q,E,K,D);if(K.extras)Q.userData=K.extras;if(H.length>1){Q.name+="_"+J;G.add(Q)}else return Q}return G})})})};z.prototype.loadCamera=function(A){__p&&__p();var B,C=this.json.cameras[A],D=C[C.type];if(!D)return;if(C.type==="perspective"){var E=D.aspectRatio||1,F=D.yfov*E;B=new(a("ThreeJS.r88").PerspectiveCamera)(a("ThreeJS.r88").Math.radToDeg(F),E,D.znear||1,D.zfar||2e6)}else if(C.type==="orthographic")B=new(a("ThreeJS.r88").OrthographicCamera)(D.xmag/-2,D.xmag/2,D.ymag/2,D.ymag/-2,D.znear,D.zfar);if(C.name!==undefined)B.name=C.name;if(C.extras)B.userData=C.extras;return a("Promise").resolve(B)};z.prototype.loadSkins=function(){var A=this.json;return this._withDependencies(["accessors"]).then(function(B){return w(A.skins,function(C){var D={joints:C.joints,inverseBindMatrices:B.accessors[C.inverseBindMatrices]};return D})})};z.prototype.loadAnimations=function(){__p&&__p();var A=this.json;return this._withDependencies(["accessors","nodes"]).then(function(B){__p&&__p();return w(A.animations,function(C,D){__p&&__p();var E=[];for(var F=0;F<C.channels.length;F++){var G=C.channels[F],H=C.samplers[G.sampler];if(H){var I=G.target,J=I.node!==undefined?I.node:I.id,K=C.parameters!==undefined?C.parameters[H.input]:H.input,L=C.parameters!==undefined?C.parameters[H.output]:H.output,M=B.accessors[K],N=B.accessors[L],O=B.nodes[J];if(O){O.updateMatrix();O.matrixAutoUpdate=true;var P;switch(u[I.path]){case u.weights:P=a("ThreeJS.r88").NumberKeyframeTrack;break;case u.rotation:P=a("ThreeJS.r88").QuaternionKeyframeTrack;break;case u.position:case u.scale:default:P=a("ThreeJS.r88").VectorKeyframeTrack;break}var Q=O.name?O.name:O.uuid;H.interpolation==="CATMULLROMSPLINE";var R=H.interpolation!==undefined?la[H.interpolation]:a("ThreeJS.r88").InterpolateLinear,S=[];if(u[I.path]===u.weights)O.traverse(function(V){if(V.isMesh===true&&V.material.morphTargets===true)S.push(V.name?V.name:V.uuid)});else S.push(Q);for(var T=0,U=S.length;T<U;T++)E.push(new P(S[T]+"."+u[I.path],a("ThreeJS.r88").AnimationUtils.arraySlice(M.array,0),a("ThreeJS.r88").AnimationUtils.arraySlice(N.array,0),R))}}}var J=C.name!==undefined?C.name:"animation_"+D;return new(a("ThreeJS.r88").AnimationClip)(J,undefined,E)})})};z.prototype.loadNodes=function(){__p&&__p();var A=this.json,B=this.extensions,C=this,D=A.nodes||[],E=A.skins||[],F={},G={};for(var H in E){var I=E[H].joints;for(var J=0;J<I.length;++J)D[I[J]].isBone=true}for(var K in D){var L=D[K];if(L.mesh!==undefined){if(F[L.mesh]===undefined)F[L.mesh]=G[L.mesh]=0;F[L.mesh]++}}return C._withDependencies(["meshes","skins","cameras"]).then(function(M){__p&&__p();return w(A.nodes,function(L){__p&&__p();if(L.isBone===true)return new(a("ThreeJS.r88").Bone)();else if(L.mesh!==undefined){var N=M.meshes[L.mesh].clone();if(F[L.mesh]>1)N.name+="_instance_"+G[L.mesh]++;return N}else if(L.camera!==undefined)return C.getDependency("camera",L.camera);else if(L.extensions&&L.extensions[e.KHR_LIGHTS]&&L.extensions[e.KHR_LIGHTS].light!==undefined){var O=B[e.KHR_LIGHTS].lights;return O[L.extensions[e.KHR_LIGHTS].light]}else return new(a("ThreeJS.r88").Object3D)()}).then(function(N){__p&&__p();return w(N,function(O,K){__p&&__p();var L=A.nodes[K];if(L.name!==undefined)O.name=a("ThreeJS.r88").PropertyBinding.sanitizeNodeName(L.name);if(L.extras)O.userData=L.extras;if(L.matrix!==undefined){var P=new(a("ThreeJS.r88").Matrix4)();P.fromArray(L.matrix);O.applyMatrix(P)}else{if(L.translation!==undefined)O.position.fromArray(L.translation);if(L.rotation!==undefined)O.quaternion.fromArray(L.rotation);if(L.scale!==undefined)O.scale.fromArray(L.scale)}if(L.skin!==undefined){var Q=[],R=O.children.length>0?O.children:[O];for(var J=0;J<R.length;J++){var S=R[J],T=M.skins[L.skin],U=S.geometry,V=S.material;V.skinning=true;var W=new(a("ThreeJS.r88").SkinnedMesh)(U,V);W.morphTargetInfluences=S.morphTargetInfluences;W.userData=S.userData;W.name=S.name;var X=[],Y=[];for(var Z=0,pa=T.joints.length;Z<pa;Z++){var qa=T.joints[Z],$=N[qa];if($){X.push($);var ra=T.inverseBindMatrices.array,sa=new(a("ThreeJS.r88").Matrix4)().fromArray(ra,Z*16);Y.push(sa)}}W.bind(new(a("ThreeJS.r88").Skeleton)(X,Y),W.matrixWorld);Q.push(W)}if(O.children.length>0){O.remove.apply(O,O.children);O.add.apply(O,Q)}else O=Q[0]}return O})})})};z.prototype.loadScenes=function(){__p&&__p();var A=this.json,B=this.extensions;function C(D,E,F){__p&&__p();var G=F[D];E.add(G);var H=A.nodes[D];if(H.children){var I=H.children;for(var J=0,K=I.length;J<K;J++){var L=I[J];C(L,G,F)}}}return this._withDependencies(["nodes"]).then(function(D){__p&&__p();return w(A.scenes,function(E){__p&&__p();var F=new(a("ThreeJS.r88").Scene)();if(E.name!==undefined)F.name=E.name;if(E.extras)F.userData=E.extras;var G=E.nodes||[];for(var H=0,I=G.length;H<I;H++){var J=G[H];C(J,F,D.nodes)}F.traverse(function(L){if(L.material&&L.material.isGLTFSpecularGlossinessMaterial)L.onBeforeRender=B[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms});if(E.extensions&&E.extensions[e.KHR_LIGHTS]&&E.extensions[e.KHR_LIGHTS].light!==undefined){var K=B[e.KHR_LIGHTS].lights;F.add(K[E.extensions[e.KHR_LIGHTS].light])}return F})})};return c}();b.exports=GLTFLoader}),null);
__d("GLTFLoader.r88.patch",["GLTFLoader.r88"],(function a(b,c,d,e,f,g){f.exports.patch=function(){return c("GLTFLoader.r88")}}),null);
__d("GLTFSceneLogEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GLTF_SCENE_NETWORK_LOAD_START:"gltf_scene_network_load_start",GLTF_SCENE_NETWORK_LOAD_END:"gltf_scene_network_load_end",GLTF_SCENE_GLB_PARSING_START:"gltf_scene_glb_parsing_start",GLTF_SCENE_GLB_PARSING_END:"gltf_scene_glb_parsing_end",GLTF_SCENE_GPU_UPLOAD_START:"gltf_scene_gpu_upload_start",GLTF_SCENE_GPU_UPLOAD_END:"gltf_scene_gpu_upload_end",GLTF_SCENE_AVG_RENDER_FRAME_RATE:"gltf_scene_avg_render_frame_rate",GLTF_SCENE_ON_TOUCH_PAN_END:"gltf_scene_on_touch_pan_end",GLTF_SCENE_ON_TOUCH_PINCH_END:"gltf_scene_on_touch_pinch_end",GLTF_SCENE_WRITE_TIME:"gltf_scene_write_time",GLTF_SCENE_ON_FAKE_GYRO_END_WWW:"gltf_scene_on_fake_gyro_end_www",GLTF_SCENE_VIEWPORT_SIZE_ERROR:"gltf_scene_viewport_size_error"})}),null);
__d("GltfScenePerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$GltfScenePerformanceTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$GltfScenePerformanceTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$GltfScenePerformanceTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$GltfScenePerformanceTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$GltfScenePerformanceTypedLogger1)};h.prototype.updateData=function(j){this.$GltfScenePerformanceTypedLogger1=babelHelpers["extends"]({},this.$GltfScenePerformanceTypedLogger1,j);return this};h.prototype.setActiveDurationMs=function(j){this.$GltfScenePerformanceTypedLogger1.active_duration_ms=j;return this};h.prototype.setAsset3dID=function(j){this.$GltfScenePerformanceTypedLogger1.asset3d_id=j;return this};h.prototype.setCompressionLevel=function(j){this.$GltfScenePerformanceTypedLogger1.compression_level=j;return this};h.prototype.setCompressionType=function(j){this.$GltfScenePerformanceTypedLogger1.compression_type=j;return this};h.prototype.setEvent=function(j){this.$GltfScenePerformanceTypedLogger1.event=j;return this};h.prototype.setGltfSceneAvgRenderFrameRate=function(j){this.$GltfScenePerformanceTypedLogger1.gltf_scene_avg_render_frame_rate=j;return this};h.prototype.setSceneURL=function(j){this.$GltfScenePerformanceTypedLogger1.scene_url=j;return this};h.prototype.setStartTimeMs=function(j){this.$GltfScenePerformanceTypedLogger1.start_time_ms=j;return this};h.prototype.setStoryID=function(j){this.$GltfScenePerformanceTypedLogger1.story_id=j;return this};h.prototype.setVC=function(j){this.$GltfScenePerformanceTypedLogger1.vc=j;return this};var i={active_duration_ms:true,asset3d_id:true,compression_level:true,compression_type:true,event:true,gltf_scene_avg_render_frame_rate:true,scene_url:true,start_time_ms:true,story_id:true,vc:true};f.exports=h}),null);
__d("GLTFSceneLoggerUtils",["GltfScenePerformanceTypedLogger","GLTFSceneLogEvents"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){this.data={frameCount:0,timeSinceLastFPSLogMs:0,touchPanStartMs:0,fakeGyroStartMs:0};this.$GLTFSceneLoggerUtils1={asset3dID:i,sceneURL:j,storyID:k}}h.prototype.logNetworkLoadEvents=function(i,j,k){this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_NETWORK_LOAD_START,{startTimeMs:i.networkLoad.startTimeMs});this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_NETWORK_LOAD_END,{activeDurationMs:i.networkLoad.durationMs,compressor:j,compressionLevel:k})};h.prototype.logGpuUploadStart=function(){this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_GPU_UPLOAD_START)};h.prototype.logGpuUploadEnd=function(i){this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_GPU_UPLOAD_END,{activeDurationMs:i})};h.prototype.logAverageFrameRate=function(i){this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_AVG_RENDER_FRAME_RATE,{averageFrameRate:i})};h.prototype.logGlbParsingEvents=function(i){this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_GLB_PARSING_START,{startTimeMs:i.glbParsing.startTimeMs});this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_GLB_PARSING_END,{activeDurationMs:i.glbParsing.durationMs})};h.prototype.logOnTouchPanEnd=function(i){this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_ON_TOUCH_PAN_END,{activeDurationMs:i})};h.prototype.logOnFakeGyroEnd=function(i){if(i<1e3)return;this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_ON_FAKE_GYRO_END_WWW,{activeDurationMs:i})};h.prototype.logViewportSizeError=function(){this.$GLTFSceneLoggerUtils2(c("GLTFSceneLogEvents").GLTF_SCENE_VIEWPORT_SIZE_ERROR)};h.prototype.$GLTFSceneLoggerUtils2=function(i){var j=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],k=new(c("GltfScenePerformanceTypedLogger"))().setEvent(i).setAsset3dID(this.$GLTFSceneLoggerUtils1.asset3dID).setSceneURL(this.$GLTFSceneLoggerUtils1.sceneURL).setActiveDurationMs(j.activeDurationMs).setStartTimeMs(j.startTimeMs).setGltfSceneAvgRenderFrameRate(j.averageFrameRate);if(this.$GLTFSceneLoggerUtils1.storyID)k.setStoryID(this.$GLTFSceneLoggerUtils1.storyID);k.log()};f.exports=h}),null);
__d("SphericalMediaMouseOverlay.react",["cx","fbt","CSS","React","ReactDOM","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=800,m=function m(o){return{mouseRoot:"_3bxe _2660"+(o?" _2dz7":""),mouse:"_2661"+(o?" _2dz7":""),mouseRotate:"_2663"+(o?" _2dz7":""),mouseInner:"_2664"+(o?" _2dz7":""),mouseLeftButton:"_2666"+(o?" _2dz7":""),mouseBackground:"_15nj",mouseButtons:"_2665",mouseRightButton:"_2667",mouseBody:"_266m",mouseText:"_2662"}};j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$SphericalMediaMouseOverlay2=null,p}n.prototype.componentDidUpdate=function(o){__p&&__p();if(o.isActive&&!this.props.isActive)this.$SphericalMediaMouseOverlay2=setTimeout(function(){return this.$SphericalMediaMouseOverlay3()}.bind(this),l);else if(!this.props.isActive)this.$SphericalMediaMouseOverlay3();else if(this.props.isActive){if(this.$SphericalMediaMouseOverlay2!==null){clearTimeout(this.$SphericalMediaMouseOverlay2);this.$SphericalMediaMouseOverlay2=null}this.$SphericalMediaMouseOverlay4()}};n.prototype.componentDidMount=function(){if(!this.props.isActive)this.$SphericalMediaMouseOverlay3();var o=c("ReactDOM").findDOMNode(this);if(o instanceof HTMLElement)this.$SphericalMediaMouseOverlay1=o};n.prototype.componentWillUnmount=function(){this.$SphericalMediaMouseOverlay1=null};n.prototype.$SphericalMediaMouseOverlay3=function(){if(this.$SphericalMediaMouseOverlay1)c("CSS").addClass(this.$SphericalMediaMouseOverlay1,"_8b2")};n.prototype.$SphericalMediaMouseOverlay4=function(){if(this.$SphericalMediaMouseOverlay1)c("CSS").removeClass(this.$SphericalMediaMouseOverlay1,"_8b2")};n.prototype.render=function(){var o=this.props,p=o.className,q=o.isActive,r=this.props.copy?this.props.copy:i._("Click and drag to look around"),s=m(q);return c("React").createElement("div",{className:c("joinClasses")(p,s.mouseRoot)},c("React").createElement("div",{className:s.mouse},c("React").createElement("div",{className:s.mouseRotate},c("React").createElement("div",{className:s.mouseInner},c("React").createElement("div",{className:s.mouseBackground}),c("React").createElement("div",{className:s.mouseButtons},c("React").createElement("div",{className:s.mouseLeftButton}),c("React").createElement("div",{className:s.mouseRightButton})),c("React").createElement("div",{className:s.mouseBody})))),c("React").createElement("div",{className:s.mouseText},r))};f.exports=n}),null);
__d("VertexAlphaMaterial",["ThreeJS.r88"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=false;h=babelHelpers.inherits(k,c("ThreeJS.r88").ShaderMaterial);i=h&&h.prototype;function k(l){"use strict";__p&&__p();i.constructor.call(this,l);this.name="CustomVertexAlphaShader";this.vertexShader="#include <common>\n          #include <skinning_pars_vertex>\n          #include <clipping_planes_pars_vertex>\n          #include <fog_pars_vertex>\n          attribute vec4 color;\n          varying vec4 colorAlpha;\n          void main(void) {\n            #include <skinbase_vertex>\n            #include <begin_vertex>\n            #include <skinning_vertex>\n            #include <project_vertex>\n            #include <worldpos_vertex>\n            #include <clipping_planes_vertex>\n            #include <fog_vertex>\n            colorAlpha = color;\n          }";this.fragmentShader="#include <common>\n          #include <fog_pars_fragment>\n          #include <clipping_planes_pars_fragment>\n          uniform float opacity;\n          varying vec4 colorAlpha;\n          void main(void) {\n            #include <clipping_planes_fragment>\n            gl_FragColor = colorAlpha;\n            gl_FragColor.a *= opacity;\n            #include <fog_fragment>\n            #include <premultiplied_alpha_fragment>\n            "+(j?"gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);":"")+"\n          }";this.uniforms.fogColor={value:new(c("ThreeJS.r88").Color)()};this.uniforms.fogNear={value:0};this.uniforms.fogFar={value:0};this.uniforms.fogDensity={value:0};this.uniforms.opacity={value:1}}f.exports=k}),null);
__d("XAsset3DForLinkShareSrcController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/3d/linkshare/src/",{status_id:{type:"FBID",required:true}})}),null);
__d("Asset3dFeedViewer.react",["ix","invariant","cx","csx","fbt","Animation","EventListener","Image.react","Link.react","React","ThreeJS.r88","VertexAlphaMaterial","GLTFLoader.r88.patch","SphericalMediaMouseOverlay.react","Ease","Tween","SphericalViewportControl","Asset3DUtils","GLTFSceneLoggerUtils","bind","CSS","DOMQuery","DOM","ReactDOM","Asset3dComponentContextMenu.react","asset","getElementRect","onViewportChanged","degToRad","radToDeg","gkx","Asset3DStatus","Asset3DBackground","Asset3DBackgroundSize","Asset3DCategory","AsyncRequest","XAsset3DForLinkShareSrcController","Random"],(function aa(ba,a,ca,da,b,ea,c,d,fa,ga,e){"use strict";__p&&__p();var f,g,h=a("GLTFLoader.r88.patch").patch(),i=Object.freeze({FAKE_GYRO_INITIAL:"fake_gyro_initial",FOCUS_STATE:"focus_state",FAKE_GYRO_AFTER_FOCUS:"fake_gyro_after_focus"}),j=10,k=.15,l=50,m=a("degToRad")(0),n=a("degToRad")(270),o=3,ha=new(a("ThreeJS.r88").Vector3)(0,0,0),ia=.01,ja=2e3,ka=1.2,la=.01,ma=30,na=false,p=1,oa=20,q=.08,r=0,s=a("degToRad")(2),pa=a("degToRad")(3),qa=.12,ra=.12,t=a("degToRad")(60),u=a("degToRad")(50),sa=6.5,ta=1.2,ua=10,va=e._("Click and drag to look around in 3D"),wa=5,xa=500,ya=4e3,v=.95,za=.1,Aa=10,w=function w(y){var z=!!y.composerID||!!y.attribution;return{sphericalOverlay:z?"_1r1y":""}};f=babelHelpers.inherits(x,a("React").Component);g=f&&f.prototype;function x(){__p&&__p();var y,z;for(var A=arguments.length,B=Array(A),C=0;C<A;C++)B[C]=arguments[C];return z=(y=g.constructor).call.apply(y,[this].concat(B)),this.state={isNuxActive:false},this.$Asset3dFeedViewer3=true,this.$Asset3dFeedViewer6=m,this.$Asset3dFeedViewer8=n,this.$Asset3dFeedViewer13=i.FAKE_GYRO_INITIAL,this.$Asset3dFeedViewer14=false,this.$Asset3dFeedViewer17=false,this.$Asset3dFeedViewer20=t,this.$Asset3dFeedViewer21=u,this.$Asset3dFeedViewer22=0,this.$Asset3dFeedViewer23=0,this.$Asset3dFeedViewer24=0,this.$Asset3dFeedViewer25=0,this.$Asset3dFeedViewer26=false,this.$Asset3dFeedViewer28=false,this.$Asset3dFeedViewer29=0,this.$Asset3dFeedViewer30=false,this.$Asset3dFeedViewer33=0,this.$Asset3dFeedViewer39=function(D){__p&&__p();var E=D.getPayload();switch(E.status){case a("Asset3DStatus").UPLOADING:setTimeout(this.$Asset3dFeedViewer36.bind(this),1e3);break;case a("Asset3DStatus").SUCCESS:this.$Asset3dFeedViewer37(E.asset3d_id,E.glb_uri);break;case a("Asset3DStatus").FAIL:var F=a("DOMQuery").find(this.props.initialViewContainer,"._623o");a("CSS").setClass(F,"_3gsr");var G=a("DOM").create("div",{className:"_3gss"});a("DOM").setContent(G,e._("3D post failed to load"));a("DOM").appendContent(this.props.initialViewContainer,G);break}}.bind(this),this.$Asset3dFeedViewer41=function(D,E,F){__p&&__p();if(F&&this.props.compressor&&this.props.compressionLevel){this.$Asset3dFeedViewer5.logNetworkLoadEvents(F,this.props.compressor,this.props.compressionLevel);this.$Asset3dFeedViewer5.logGlbParsingEvents(F)}D=D.scene;this.$Asset3dFeedViewer35.scene.add(D);D.traverse(function(U){__p&&__p();if(U.isMesh){var V=U;if(!V.geometry.isBufferGeometry)return;var W=V.material;if(W.map&&W.map.isTexture&&W.map.anisotropy===1)W.map.anisotropy=4;var Ba=V.geometry,X=Ba.getAttribute("color"),Y=false;if(X&&X.itemSize===4){for(var Z=0,$=3;Z<X.count;Z++,$+=4)if(X.array[$]<1){Y=true;break}if(Y)W=new(a("VertexAlphaMaterial"))({flatShading:W.flatShading,skinning:W.skinning,transparent:W.transparent,morphTargets:W.morphTargets,fog:true,clipping:true});W.needsUpdate=true;V.material=W}}});var G=o;if(na){var H=false;D.traverse(function(U){if(U.type.indexOf("Camera")!=-1){this.$Asset3dFeedViewer35.camera.position.copy(U.position);this.$Asset3dFeedViewer35.camera.rotation.copy(U.rotation);this.$Asset3dFeedViewer35.camera.fov=U.fov;G=this.$Asset3dFeedViewer35.camera.position.distanceTo(ha);H=true}}.bind(this));if(!H)this.$Asset3dFeedViewer35.camera.position.set(0,0,G)}else if(this.$Asset3dFeedViewer17){this.$Asset3dFeedViewer35.camera.position.set(0,0,0);this.$Asset3dFeedViewer35.cameraTarget.set(0,0,-p);G=p;this.$Asset3dFeedViewer35.camera.fov=oa}else{var I=new(a("ThreeJS.r88").Box3)().setFromObject(D);this.$Asset3dFeedViewer35.cameraTarget=I.getCenter();var J=I.getSize(),K=J.length();G=K*ka;this.$Asset3dFeedViewer35.camera.near=K*la;this.$Asset3dFeedViewer35.camera.far=K*ma;this.$Asset3dFeedViewer35.camera.position.copy(this.$Asset3dFeedViewer35.cameraTarget);this.$Asset3dFeedViewer35.camera.position.z+=G}this.$Asset3dFeedViewer35.camera.updateProjectionMatrix();this.$Asset3dFeedViewer10=za*G;this.$Asset3dFeedViewer11=Aa*G;this.$Asset3dFeedViewer35.camera.position.sub(this.$Asset3dFeedViewer35.cameraTarget);this.$Asset3dFeedViewer35.cameraAnchor.position.add(this.$Asset3dFeedViewer35.cameraTarget);this.$Asset3dFeedViewer35.cameraPanAnchorY.position.y=2*G*Math.tan(a("degToRad")(this.$Asset3dFeedViewer35.camera.fov*.5));this.$Asset3dFeedViewer35.cameraPanAnchorX.position.x=this.$Asset3dFeedViewer35.cameraPanAnchorY.position.y/this.$Asset3dFeedViewer35.camera.aspect;this.$Asset3dFeedViewer35.cameraAnchor.add(this.$Asset3dFeedViewer35.cameraPanAnchorX);this.$Asset3dFeedViewer35.cameraAnchor.add(this.$Asset3dFeedViewer35.cameraPanAnchorY);if(this.props.enableAnimation){this.$Asset3dFeedViewer35.animations=E;var L=new(a("ThreeJS.r88").AnimationMixer)(D);for(var M=E,N=Array.isArray(M),O=0,M=N?M:M[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var P;if(N){if(O>=M.length)break;P=M[O++]}else{O=M.next();if(O.done)break;P=O.value}var Q=P,R=Q.name.split("_")[0];if(Object.prototype.hasOwnProperty.call(this.$Asset3dFeedViewer35.animationTypes,R)){this.$Asset3dFeedViewer35.animationTypes[R].push(Q);var S=L.clipAction(Q,D);Q.action=S;this.$Asset3dFeedViewer42(Q,S,R)}}this.$Asset3dFeedViewer35.animationMixer=L}this.$Asset3dFeedViewer43(true);var T=a("onViewportChanged")(this.$Asset3dFeedViewer44);T.scheduleCheck();this.$Asset3dFeedViewer34=T}.bind(this),this.update=function(){__p&&__p();var D=this.$Asset3dFeedViewer35.clock.getDelta();this.$Asset3dFeedViewer5.data.timeSinceLastFPSLogMs+=D;this.$Asset3dFeedViewer5.data.frameCount+=1;if(this.$Asset3dFeedViewer5.data.timeSinceLastFPSLogMs>ua){var E=this.$Asset3dFeedViewer5.data.frameCount/this.$Asset3dFeedViewer5.data.timeSinceLastFPSLogMs;this.$Asset3dFeedViewer5.logAverageFrameRate(Math.round(E));this.$Asset3dFeedViewer5.data.timeSinceLastFPSLogMs=0;this.$Asset3dFeedViewer5.data.frameCount=0}if(this.props.enableAnimation)this.$Asset3dFeedViewer51(D);if(this.$Asset3dFeedViewer2){this.$Asset3dFeedViewer49();this.$Asset3dFeedViewer50();this.$Asset3dFeedViewer35.renderer.render(this.$Asset3dFeedViewer35.scene,this.$Asset3dFeedViewer35.camera);this.$Asset3dFeedViewer4=requestAnimationFrame(this.update)}}.bind(this),this.$Asset3dFeedViewer44=function(D){if(!this.$Asset3dFeedViewer1)return;var E=a("getElementRect")(this.$Asset3dFeedViewer1),F=D.top,G=D.bottom,H=E.top>F&&E.top<G||E.bottom>F&&E.bottom<G||F>E.top&&G<E.bottom;if(this.$Asset3dFeedViewer2!==H){this.$Asset3dFeedViewer2=H;H?this.$Asset3dFeedViewer54():this.$Asset3dFeedViewer55()}}.bind(this),z}x.prototype.componentDidMount=function(){__p&&__p();this.$Asset3dFeedViewer15=new(a("Tween"))();this.$Asset3dFeedViewer2=false;if(!this.props.glbURI)this.$Asset3dFeedViewer36();else this.$Asset3dFeedViewer37();if(this.$Asset3dFeedViewer1){a("EventListener").listen(this.$Asset3dFeedViewer1,"contextmenu",function(z){if(a("Asset3DUtils").isNonDeveloper())z.preventDefault();else if(z.shiftKey)z.preventDefault()});if(this.$Asset3dFeedViewer1 instanceof HTMLElement){var y=a("React").createElement(a("Asset3dComponentContextMenu.react"),{target:this.$Asset3dFeedViewer1,fileURL:this.props.glbURI});a("ReactDOM").render(y,this.$Asset3dFeedViewer1)}}};x.prototype.componentWillUnmount=function(){clearTimeout(this.$Asset3dFeedViewer31);clearTimeout(this.$Asset3dFeedViewer32);this.$Asset3dFeedViewer38()};x.prototype.componentWillReceiveProps=function(y){if(y.glbURI&&y.glbURI!==this.props.glbURI){this.$Asset3dFeedViewer2=false;this.$Asset3dFeedViewer3=true;this.$Asset3dFeedViewer38();this.$Asset3dFeedViewer37(y.asset3dID,y.glbURI)}};x.prototype.$Asset3dFeedViewer36=function(){if(this.$Asset3dFeedViewer33>=j)return;var y=a("XAsset3DForLinkShareSrcController").getURIBuilder().setFBID("status_id",String(this.props.statusID)).getURI();new(a("AsyncRequest"))().setURI(y).setMethod("GET").setReadOnly(true).setHandler(a("bind")(this,this.$Asset3dFeedViewer39)).setErrorHandler(function(z){z&&z.errorDescription}).send();this.$Asset3dFeedViewer33+=1};x.prototype.$Asset3dFeedViewer37=function(y,z){__p&&__p();var A=this.props,B=A.storyID,C=A.width,D=A.height,E=A.initialViewContainer,F=A.category,G=this.$Asset3dFeedViewer1,H=y?y:this.props.asset3dID,I=z?z:this.props.glbURI;if(!I||!G)return;if(C===1){this.$Asset3dFeedViewer18=E.clientWidth;this.$Asset3dFeedViewer19=E.clientWidth}else{this.$Asset3dFeedViewer18=C;this.$Asset3dFeedViewer19=D}var J=new(a("ThreeJS.r88").Scene)(),K=new(a("ThreeJS.r88").Object3D)();J.add(K);var L=new(a("ThreeJS.r88").PerspectiveCamera)(l,this.$Asset3dFeedViewer18/this.$Asset3dFeedViewer19,ia,ja);L.lookAt(J.position);L.updateProjectionMatrix();K.add(L);var M=new(a("ThreeJS.r88").AmbientLight)(13421772,.5);J.add(M);var N=new(a("ThreeJS.r88").DirectionalLight)(15658734);N.position.set(1,2,1);L.add(N);var O=new(a("ThreeJS.r88").Clock)(),P=this.$Asset3dFeedViewer40(),Q=new h();H||d(0);this.$Asset3dFeedViewer5=new(a("GLTFSceneLoggerUtils"))(H,I,B);this.$Asset3dFeedViewer17=F===a("Asset3DCategory").PHOTOS_3D;this.$Asset3dFeedViewer20=t;this.$Asset3dFeedViewer21=u;if(this.$Asset3dFeedViewer17){var R=a("degToRad")(90);this.$Asset3dFeedViewer20=R-(R-t)*r;this.$Asset3dFeedViewer21=u*r;this.$Asset3dFeedViewer22=0;this.$Asset3dFeedViewer23=0;this.$Asset3dFeedViewer24=0;this.$Asset3dFeedViewer25=0;this.$Asset3dFeedViewer26=false;this.$Asset3dFeedViewer27=a("Random").random()<.5}this.$Asset3dFeedViewer35={animationMixer:null,animations:null,animationTypes:P,camera:L,clock:O,gltfLoader:Q,light:M,model:null,renderer:null,scene:J,cameraAnchor:K,cameraTarget:new(a("ThreeJS.r88").Vector3)(0,0,0),cameraPanAnchorX:new(a("ThreeJS.r88").Object3D)(),cameraPanAnchorY:new(a("ThreeJS.r88").Object3D)()};Q.load(I,this.$Asset3dFeedViewer41)};x.prototype.$Asset3dFeedViewer40=function(){return{xscrub:[],xswipe:[],yscrub:[],xtilt:[],ytilt:[],ztilt:[],pinch:[],loop:[],looptop:[],triggertop:[],triggerbottom:[],loopmid:[],loopbottom:[]}};x.prototype.$Asset3dFeedViewer43=function(y){__p&&__p();var z=new(a("ThreeJS.r88").WebGLRenderer)({antialias:true,alpha:true});z.gammaOutput=true;z.setPixelRatio(window.devicePixelRatio);z.setSize(this.$Asset3dFeedViewer18,this.$Asset3dFeedViewer19);this.$Asset3dFeedViewer35.renderer=z;this.$Asset3dFeedViewer28=true;var A={enableGyro:true,slipFactor:k,enableRubberBanding:false,disableAutoClientSizeUpdate:true,enableZoomWithShiftKey:true,enablePanningWithRightMouse:true},B={expansionCoef:1.01,fieldOfView:l,initialHeading:a("radToDeg")(n),initialPitch:0,projectionType:"flat"};if(this.$Asset3dFeedViewer1)this.$Asset3dFeedViewer1.appendChild(this.$Asset3dFeedViewer35.renderer.domElement);this.$Asset3dFeedViewer16=new(a("SphericalViewportControl"))(this.$Asset3dFeedViewer35.renderer.domElement,B,A);if(this.$Asset3dFeedViewer16.$Asset3dFeedViewer45<this.$Asset3dFeedViewer18/2||this.$Asset3dFeedViewer16.$Asset3dFeedViewer46<this.$Asset3dFeedViewer19/2){this.$Asset3dFeedViewer5.logViewportSizeError();this.$Asset3dFeedViewer16.updateViewportClientSize({width:this.$Asset3dFeedViewer18,height:this.$Asset3dFeedViewer19})}if(this.$Asset3dFeedViewer17)this.$Asset3dFeedViewer16.addListener("mouseMove",function(D){var E=D.clientX,F=D.clientY,G=a("getElementRect")(this.$Asset3dFeedViewer35.renderer.domElement);if(E>G.left&&E<G.right&&F>G.top&&F<G.bottom){var H=.5*(G.left+G.right),I=.5*(G.top+G.bottom);this.$Asset3dFeedViewer24=-2*(E-H)/G.width*s;this.$Asset3dFeedViewer25=2*(F-I)/G.height*pa;this.$Asset3dFeedViewer26=true}}.bind(this));else{this.$Asset3dFeedViewer16.addListener("viewportChange",function(D,E,F){this.$Asset3dFeedViewer8=a("degToRad")(D);this.$Asset3dFeedViewer6=a("degToRad")(-E);if(this.$Asset3dFeedViewer13===i.FOCUS_STATE){this.$Asset3dFeedViewer6=Math.min(a("degToRad")(45),Math.max(this.$Asset3dFeedViewer6,a("degToRad")(-45)));if(this.state.isNuxActive)this.setState({isNuxActive:false})}}.bind(this));this.$Asset3dFeedViewer16.addListener("mouseMove",function(D){if(this.$Asset3dFeedViewer14){this.$Asset3dFeedViewer16.setMovementPosition(D);this.$Asset3dFeedViewer14=false}}.bind(this));this.$Asset3dFeedViewer16.addListener("wheelScrollWithShiftKey",function(D,E){__p&&__p();var F=this.$Asset3dFeedViewer35.camera.position.length();if(D>0){if(F<this.$Asset3dFeedViewer11){this.$Asset3dFeedViewer47((1-1/v)*E.x,(1/v-1)*E.y);this.$Asset3dFeedViewer35.camera.position.divideScalar(v);this.$Asset3dFeedViewer35.cameraPanAnchorX.position.divideScalar(v);this.$Asset3dFeedViewer35.cameraPanAnchorY.position.divideScalar(v)}}else if(D<0)if(F>this.$Asset3dFeedViewer10){this.$Asset3dFeedViewer47((1-v)*E.x,(v-1)*E.y);this.$Asset3dFeedViewer35.camera.position.multiplyScalar(v);this.$Asset3dFeedViewer35.cameraPanAnchorX.position.multiplyScalar(v);this.$Asset3dFeedViewer35.cameraPanAnchorY.position.multiplyScalar(v)}}.bind(this));this.$Asset3dFeedViewer16.addListener("panningWithRightMouse",function(D){this.$Asset3dFeedViewer47(-D.x,D.y)}.bind(this));this.$Asset3dFeedViewer16.addListener("updateViewportMoveStart",function(D){this.$Asset3dFeedViewer5.data.fakeGyroStartMs=Date.now()}.bind(this));this.$Asset3dFeedViewer16.addListener("updateViewportMove",function(D){__p&&__p();this.$Asset3dFeedViewer29+=1;if(!this.$Asset3dFeedViewer30&&!this.state.isNuxActive&&this.$Asset3dFeedViewer29>wa){this.$Asset3dFeedViewer30=true;this.$Asset3dFeedViewer31=setTimeout(function(){this.setState({isNuxActive:true},function(){this.$Asset3dFeedViewer32=setTimeout(function(){if(this.state.isNuxActive)this.setState({isNuxActive:false})}.bind(this),ya)}.bind(this));this.$Asset3dFeedViewer31=null}.bind(this),xa)}this.$Asset3dFeedViewer15.stop()}.bind(this));this.$Asset3dFeedViewer16.addListener("updateViewportEnd",function(D,E){__p&&__p();this.$Asset3dFeedViewer29=0;clearTimeout(this.$Asset3dFeedViewer31);this.$Asset3dFeedViewer30=false;this.$Asset3dFeedViewer7=this.$Asset3dFeedViewer6;this.$Asset3dFeedViewer9=this.$Asset3dFeedViewer8;if(this.$Asset3dFeedViewer13===i.FOCUS_STATE){this.$Asset3dFeedViewer13=i.FAKE_GYRO_AFTER_FOCUS;this.$Asset3dFeedViewer16.setSphericalOrientation(a("radToDeg")(this.$Asset3dFeedViewer8),a("radToDeg")(-this.$Asset3dFeedViewer6));this.$Asset3dFeedViewer16.setAngularVelocityScaleFactor({x:1,y:1});this.$Asset3dFeedViewer16.reEnableGyro();this.$Asset3dFeedViewer14=true;this.$Asset3dFeedViewer5.logOnTouchPanEnd(Date.now()-this.$Asset3dFeedViewer5.data.touchPanStartMs);this.$Asset3dFeedViewer5.data.fakeGyroStartMs=Date.now()}else this.$Asset3dFeedViewer5.logOnFakeGyroEnd(Date.now()-this.$Asset3dFeedViewer5.data.fakeGyroStartMs);this.$Asset3dFeedViewer48()}.bind(this));this.$Asset3dFeedViewer16.addListener("onMovementStart",function(D){this.$Asset3dFeedViewer15.stop();if(this.$Asset3dFeedViewer13!==i.FOCUS_STATE){this.$Asset3dFeedViewer13=i.FOCUS_STATE;this.$Asset3dFeedViewer16.setAngularVelocityScaleFactor({x:sa,y:ta});this.$Asset3dFeedViewer5.data.touchPanStartMs=Date.now();this.$Asset3dFeedViewer5.logOnFakeGyroEnd(Date.now()-this.$Asset3dFeedViewer5.data.fakeGyroStartMs)}}.bind(this))}a("EventListener").listen(this.$Asset3dFeedViewer35.renderer.domElement,"webglcontextlost",function(D){this.$Asset3dFeedViewer38()}.bind(this));if(this.props.composerID!==null&&y){this.$Asset3dFeedViewer49();this.$Asset3dFeedViewer50();this.$Asset3dFeedViewer35.renderer.render(this.$Asset3dFeedViewer35.scene,this.$Asset3dFeedViewer35.camera);var C=a("Asset3DUtils").takeScreenshot(this.$Asset3dFeedViewer35.renderer.domElement);a("Asset3DUtils").saveScreenshot(C,this.props.asset3dID)}if(a("gkx")("AT48FWmB8_LKIn9ifpnl5Z88q4aHblWfFPq0uBpCazRb-PSc9Ulf_M6Be_QDzTo4zxt5oRiu0U-tCocoxSU2Cybn"))new(a("ThreeJS.r88").TextureLoader)().load("/images/asset3d/packed.jpg",function(D){__p&&__p();D.mapping=a("ThreeJS.r88").CubeUVReflectionMapping;D.minFilter=a("ThreeJS.r88").LinearFilter;D.magFilter=a("ThreeJS.r88").LinearFilter;this.$Asset3dFeedViewer35.scene.traverse(function(E){if(E.material&&E.material.type=="MeshStandardMaterial"){E.material.envMap=D;E.material.envMapIntensity=2;E.material.needsUpdate=true}});this.$Asset3dFeedViewer35.scene.remove(this.$Asset3dFeedViewer35.light)}.bind(this))};x.prototype.$Asset3dFeedViewer38=function(){__p&&__p();if(!this.$Asset3dFeedViewer28)return;if(this.$Asset3dFeedViewer4!=null){window.cancelAnimationFrame(this.$Asset3dFeedViewer4);this.$Asset3dFeedViewer4=null}this.$Asset3dFeedViewer15.stop();this.$Asset3dFeedViewer16.destroy();if(this.$Asset3dFeedViewer1)this.$Asset3dFeedViewer1.removeChild(this.$Asset3dFeedViewer35.renderer.domElement);this.$Asset3dFeedViewer28=false};x.prototype.$Asset3dFeedViewer48=function(){if(this.$Asset3dFeedViewer13===i.FAKE_GYRO_INITIAL)this.$Asset3dFeedViewer15.start(function(y,z){var A=a("Tween").scale(this.$Asset3dFeedViewer9,n,y),B=a("Tween").scale(-this.$Asset3dFeedViewer7,m,y);this.$Asset3dFeedViewer16.setSphericalOrientation(a("radToDeg")(A),a("radToDeg")(B))}.bind(this),2e3,a("Ease").makePowerIn(3))};x.prototype.$Asset3dFeedViewer50=function(){__p&&__p();var y=this.$Asset3dFeedViewer20+this.$Asset3dFeedViewer21*(1-this.$Asset3dFeedViewer12),z=this.$Asset3dFeedViewer6+y;z=Math.min(Math.PI,Math.max(z,.01));var A=-this.$Asset3dFeedViewer8;if(this.$Asset3dFeedViewer17){var B=(this.$Asset3dFeedViewer12-.25)*Math.PI/1.5;B=Math.max(0,B);var C=qa*(.6-Math.sin(B)),D=ra*(this.$Asset3dFeedViewer12-.5);this.$Asset3dFeedViewer35.camera.position.set(0,D,p+C);if(this.$Asset3dFeedViewer26){this.$Asset3dFeedViewer23+=q*(this.$Asset3dFeedViewer25-this.$Asset3dFeedViewer23);this.$Asset3dFeedViewer22+=q*(this.$Asset3dFeedViewer24-this.$Asset3dFeedViewer22)}else{this.$Asset3dFeedViewer23=0;this.$Asset3dFeedViewer22=(this.$Asset3dFeedViewer27?1-2*this.$Asset3dFeedViewer12:2*this.$Asset3dFeedViewer12-1)*s}z+=this.$Asset3dFeedViewer23;A+=this.$Asset3dFeedViewer22}var E=-.001*Math.sin(z)*Math.cos(A),F=-.001*Math.cos(z),G=-.001*Math.sin(z)*Math.sin(A);this.$Asset3dFeedViewer35.cameraAnchor.position.set(E+this.$Asset3dFeedViewer35.cameraTarget.x,F+this.$Asset3dFeedViewer35.cameraTarget.y,G+this.$Asset3dFeedViewer35.cameraTarget.z);this.$Asset3dFeedViewer35.cameraAnchor.lookAt(this.$Asset3dFeedViewer35.cameraTarget)};x.prototype.$Asset3dFeedViewer47=function(y,z){__p&&__p();var A=new(a("ThreeJS.r88").Vector3)(),B=new(a("ThreeJS.r88").Vector3)();this.$Asset3dFeedViewer35.cameraAnchor.updateMatrixWorld();B.setFromMatrixPosition(this.$Asset3dFeedViewer35.cameraPanAnchorX.matrixWorld);B.sub(this.$Asset3dFeedViewer35.cameraTarget);A.addScaledVector(B,y);B.set(0,0,0);B.setFromMatrixPosition(this.$Asset3dFeedViewer35.cameraPanAnchorY.matrixWorld);B.sub(this.$Asset3dFeedViewer35.cameraTarget);A.addScaledVector(B,z);this.$Asset3dFeedViewer35.cameraTarget.add(A);this.$Asset3dFeedViewer35.cameraAnchor.position.add(A)};x.prototype.$Asset3dFeedViewer42=function(y,z,A){__p&&__p();z.animationName=y.name;if(A==="loop"){z.setLoop(a("ThreeJS.r88").LoopRepeat);z.play()}else if(A==="looptop"){z.setLoop(a("ThreeJS.r88").LoopRepeat);z.paused=false;z.play()}else if(A==="loopbottom"||A==="loopmid")z.setLoop(a("ThreeJS.r88").LoopRepeat);else if(A==="triggertop"||A==="triggerbottom"){z.setLoop(a("ThreeJS.r88").LoopOnce);z.clampWhenFinished=true}else{z.setLoop(a("ThreeJS.r88").LoopOnce);z.clampWhenFinished=true;z.paused=true;z.play()}};x.prototype.$Asset3dFeedViewer51=function(y){var z=this.$Asset3dFeedViewer35.animationMixer;if(z){this.$Asset3dFeedViewer52();this.$Asset3dFeedViewer53();z.update(y)}};x.prototype.$Asset3dFeedViewer52=function(){};x.prototype.$Asset3dFeedViewer53=function(){};x.prototype.$Asset3dFeedViewer54=function(){__p&&__p();if(!this.$Asset3dFeedViewer28)this.$Asset3dFeedViewer43(false);if(this.$Asset3dFeedViewer3){var y=Date.now();this.$Asset3dFeedViewer5.logGpuUploadStart();this.$Asset3dFeedViewer35.renderer.render(this.$Asset3dFeedViewer35.scene,this.$Asset3dFeedViewer35.camera);this.$Asset3dFeedViewer5.logGpuUploadEnd(Date.now()-y);new(a("Animation"))(this.props.initialViewContainer).to("opacity",0).duration(350).hide().go();var z=a("DOMQuery").scry(a("ReactDOM").findDOMNode(this),"._3xkn")[0];if(z)new(a("Animation"))(z).to("opacity",1).duration(700).go();this.$Asset3dFeedViewer3=false}requestAnimationFrame(this.update)};x.prototype.$Asset3dFeedViewer55=function(){};x.prototype.$Asset3dFeedViewer49=function(){if(!this.$Asset3dFeedViewer1)return;var y=window.innerHeight||document.documentElement.clientHeight,z=a("getElementRect")(this.$Asset3dFeedViewer1),A=z.top+z.height/2;this.$Asset3dFeedViewer12=A/y};x.prototype.render=function(){__p&&__p();var y=null;if(this.props.attribution){var z=this.props.attribution.href,A=this.props.attribution.source,B=this.props.attribution.text;y=a("React").createElement("div",{className:"_3xkn"},a("React").createElement(a("Link.react"),{href:z,target:"_blank"},a("React").createElement(a("Image.react"),{className:"_47ru",src:c("459146")}),a("React").createElement("div",{className:"_47rt"},a("React").createElement("div",{className:"_377f"},B),a("React").createElement("div",{className:"_377g"},A?A:z))))}var C={};if(this.props.background&&this.props.background!==a("Asset3DBackground").DEFAULT)C=a("Asset3DUtils").getBackgroundStyles(this.props.background,a("Asset3DBackgroundSize").STORY);var D=w(this.props),E=void 0;if(this.props.height!==1)E={height:this.props.height};return a("React").createElement("div",{style:C},a("React").createElement("div",{style:E,ref:function(F){return this.$Asset3dFeedViewer1=F}.bind(this)}),a("React").createElement(a("SphericalMediaMouseOverlay.react"),{className:D.sphericalOverlay,isActive:this.state.isNuxActive,copy:va}),y)};x.defaultProps={storyID:null,asset3dID:null,statusID:null,glbURI:null,compressor:null,compressionLevel:null,attribution:null,height:1,width:1,composerID:null,background:null};b.exports=x}),null);