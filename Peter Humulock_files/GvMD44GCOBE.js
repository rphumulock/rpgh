if (self.CavalryLogger) { CavalryLogger.start_js(["GGdjm"]); }

__d("MessengerLightweightActionAttachmentContent.react",["cx","LineClamp.react","Image.react","ImageBlock.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","MercuryShareImage.react","MessengerAttachmentImageBlock.react","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=72;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props.attachment,o=this.props.location,p=this.$MessengerLightweightActionAttachmentContent1();if(n.media&&n.media.image){if(c("MercuryShareAttachmentRenderLocations").CHAT===o||c("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW===o)return this.$MessengerLightweightActionAttachmentContent2(p);else if(c("MercuryShareAttachmentRenderLocations").MESSENGER===o)return this.$MessengerLightweightActionAttachmentContent3(p);return this.$MessengerLightweightActionAttachmentContent4(p)}return c("React").createElement("div",{className:c("joinClasses")(this.props.className,p)},this.$MessengerLightweightActionAttachmentContent5(),this.props.children)};m.prototype.$MessengerLightweightActionAttachmentContent2=function(n){return c("React").createElement(c("ImageBlock.react"),{className:n,spacing:"medium"},c("React").createElement(c("MercuryShareImage.react"),{height:l,source:this.props.attachment.media.image,width:l}),c("React").createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",height:l}},this.$MessengerLightweightActionAttachmentContent5()))};m.prototype.$MessengerLightweightActionAttachmentContent3=function(n){return c("React").createElement(c("MessengerAttachmentImageBlock.react"),{className:n,attachment:this.props.attachment},this.$MessengerLightweightActionAttachmentContent5(),this.props.children)};m.prototype.$MessengerLightweightActionAttachmentContent4=function(n){return c("React").createElement(c("ImageBlock.react"),{className:c("joinClasses")(this.props.className,n)},c("React").createElement(c("Image.react"),{className:"__6n",src:this.props.attachment.media.image,width:l}),this.$MessengerLightweightActionAttachmentContent5(),this.props.children)};m.prototype.$MessengerLightweightActionAttachmentContent1=function(){var n=this.props.attachment,o=this.props.location;return(c("MercuryShareAttachmentRenderLocations").CHAT===o?"_49or":"")+(c("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW===o?" _324d":"")+(c("MercuryShareAttachmentRenderLocations").CHAT!==o?" _tih":"")+(!(n&&n.media.image)?" _49ou":"")+" _310t"};m.prototype.$MessengerLightweightActionAttachmentContent5=function(){if(c("MercuryShareAttachmentRenderLocations").MESSENGER===this.props.location)return c("React").createElement("div",{className:"__6j"},this.$MessengerLightweightActionAttachmentContent6(),this.$MessengerLightweightActionAttachmentContent7());return c("React").createElement("div",{className:"__6j"},this.$MessengerLightweightActionAttachmentContent8(),this.$MessengerLightweightActionAttachmentContent9())};m.prototype.$MessengerLightweightActionAttachmentContent6=function(){if(!this.props.attachment.title)return null;return c("React").createElement("div",{className:"__6k"},c("React").createElement(c("LineClamp.react"),{customEllipsis:" ",lines:2,lineHeight:18},this.props.attachment.title))};m.prototype.$MessengerLightweightActionAttachmentContent7=function(){if(!this.props.attachment.description)return null;return c("React").createElement("div",{className:"__6l"},c("React").createElement(c("LineClamp.react"),{customEllipsis:" ",lines:2,lineHeight:16},this.props.attachment.description))};m.prototype.$MessengerLightweightActionAttachmentContent8=function(){if(!this.props.attachment.title)return null;return c("React").createElement("div",{className:"__6k _2xsq"},this.props.attachment.title)};m.prototype.$MessengerLightweightActionAttachmentContent9=function(){if(!this.props.attachment.description)return null;return c("React").createElement("div",{className:"__6l"},this.props.attachment.description)};function m(){i.apply(this,arguments)}m.propType={attachment:c("MercuryShareAttachmentReactShape"),location:k.oneOf(c("MercuryShareAttachmentRenderLocations").getValues())};f.exports=m}),null);
__d("MessengerLightweightActionAttachment.react",["cx","fbt","MercuryMessageActions","MercuryIDs","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","MercurySourceType","MercuryMessageObject","MessagingTag","MessengerLightweightActionAttachmentContent.react","MercuryThreadActions","CurrentUser","Link.react","React","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryMessageActions").get(),m=c("MercuryThreadActions").get(),n=c("CurrentUser").getID(),o=c("React").PropTypes;j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(){__p&&__p();k.constructor.call(this);this.state={canClickWave:true};this.$MessengerLightweightActionAttachment2=function(event){__p&&__p();if(this.props.attachment.target.lwa_type!="GROUP_WAVE"&&this.$MessengerLightweightActionAttachment1()||!this.state.canClickWave)return;this.setState({canClickWave:false});setTimeout(function(){if(!this.unmounted)this.setState({canClickWave:true})}.bind(this),5e3);m.changeFolder(this.props.threadID,c("MessagingTag").INBOX);var q=c("MercuryMessageObject").getForFBID(n).constructAttachmentMessageObject(c("MercurySourceType").MESSENGER_WEB,this.props.threadID);if(this.props.attachment.target.lwa_type==="GROUP_WAVE")q.lightweight_action_attachment={lwa_state:"INITIATED",lwa_type:this.props.attachment.target.lwa_type};else q.lightweight_action_attachment={lwa_state:"RECIPROCATED",lwa_type:this.props.attachment.target.lwa_type};l.send(q);this.props.onCompletion&&this.props.onCompletion()}.bind(this);this.unmounted=false}p.prototype.renderLink=function(q){if(c("MercuryShareAttachmentRenderLocations").isPreview(this.props.location)||this.props.attachment.target.lwa_state!="INITIATED"||this.$MessengerLightweightActionAttachment1())return c("gkx")("AT5jVqghs9R-Nalfuant-OpQGexKpV-Lvk0zsjcgyNeCAPkQFy-F7Ku4x6WSSnQxEXUiMEmPIqbnxuBACYn4sSsR")?c("React").createElement("div",{className:"_18oz"},q):q;return c("gkx")("AT5jVqghs9R-Nalfuant-OpQGexKpV-Lvk0zsjcgyNeCAPkQFy-F7Ku4x6WSSnQxEXUiMEmPIqbnxuBACYn4sSsR")?c("React").createElement("div",{className:"_18oz _18o_"},q,c("React").createElement("div",{className:"_18p0"},c("React").createElement(c("Link.react"),{className:"_5rw4 _18p1",onClick:this.$MessengerLightweightActionAttachment2,target:"_blank",tabIndex:"0"},i._("Wave")))):c("React").createElement(c("Link.react"),{className:"_5rw4",onClick:this.$MessengerLightweightActionAttachment2,target:"_blank",tabIndex:"0"},q)};p.prototype.render=function(){return this.renderLink(c("React").createElement(c("MessengerLightweightActionAttachmentContent.react"),this.props))};p.prototype.$MessengerLightweightActionAttachment1=function(){return this.props.pageID===c("MercuryIDs").getParticipantIDFromUserID(n)};p.prototype.componentWillUnmount=function(){this.unmounted=true};p.propTypes={attachment:c("MercuryShareAttachmentReactShape"),location:o.oneOf(c("MercuryShareAttachmentRenderLocations").getValues()),pageID:o.string};f.exports=p}),null);